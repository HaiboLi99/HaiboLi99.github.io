<!DOCTYPE html>
<html>
  <head>
    <!-- âœ… 1. ä¼˜å…ˆè®¾ç½®ä¸»é¢˜ï¼Œé˜²æ­¢é—ªçƒ -->
    <script>
(function () {
  var saved = localStorage.getItem('theme');
  var systemDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  var theme = saved ? saved : (systemDark ? 'dark' : 'light');

  // 1) å…ˆåœ¨ <html> ä¸Šåº”ç”¨ä¸»é¢˜ï¼Œå¹¶ä¸´æ—¶å…³é—­è¿‡æ¸¡ï¼Œé¿å…é—ªçƒ
  var html = document.documentElement;
  html.classList.add('no-transitions');
  html.classList.add(theme + '-theme');

  // 2) DOM å°±ç»ªåï¼ŒåŒæ­¥åˆ° <body>ï¼Œå¹¶æ¢å¤è¿‡æ¸¡
  document.addEventListener('DOMContentLoaded', function () {
    document.body.classList.add(theme + '-theme');
    html.classList.remove('no-transitions');
  });
})();
</script>

    {% include head.html %}
  </head>

  <body>
    <!-- âœ… Flexbox æ ¹å®¹å™¨ -->
    <div class="site-wrapper d-flex flex-column min-vh-100">
      <!-- âœ… é¡µçœ‰ -->
      {% include header.html %}

      <!-- âœ… ä¸»ä½“å†…å®¹ -->
      <main class="content">
        <div class="container-fluid">
          <div class="row">
            {{ content }}
          </div>
        </div>
      </main>

      <!-- âœ… é¡µè„š -->
      {% include footer.html %}
    </div>

    <!-- âœ… 2. ä¸»é¢˜åˆ‡æ¢æŒ‰é’®é€»è¾‘ï¼ˆæ”¯æŒå¤šä¸ªæŒ‰é’®ï¼‰ -->
    <script>
  function updateThemeIcon() {
    const btns = document.querySelectorAll('.theme-toggle-btn');
    const isDark = document.body.classList.contains('dark-theme');
    btns.forEach(btn => btn.textContent = isDark ? 'ğŸŒ™' : 'â˜€ï¸');
  }

  function toggleTheme() {
    const isDark = document.body.classList.contains('dark-theme');
    const toDark = !isDark;

    // åŒæ­¥åˆ‡æ¢ html ä¸ body
    document.documentElement.classList.toggle('dark-theme', toDark);
    document.documentElement.classList.toggle('light-theme', !toDark);
    document.body.classList.toggle('dark-theme', toDark);
    document.body.classList.toggle('light-theme', !toDark);

    localStorage.setItem('theme', toDark ? 'dark' : 'light');
    updateThemeIcon();
  }

  document.addEventListener('DOMContentLoaded', updateThemeIcon);
</script>

  </body>
</html>
