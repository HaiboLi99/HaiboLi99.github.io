<!DOCTYPE html>
<html>
  <head>
    <!-- ‚úÖ 1. ‰ºòÂÖàËÆæÁΩÆ‰∏ªÈ¢òÔºåÈò≤Ê≠¢Èó™ÁÉÅ -->
    <script>
      (function () {
        try {
          const saved = localStorage.getItem('theme');
          const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
          const theme = saved || (prefersLight ? 'light' : 'dark');
          document.documentElement.classList.add(theme + '-theme');
          document.body?.classList?.add(theme + '-theme');
        } catch (e) {
          document.documentElement.classList.add('dark-theme');
          document.body?.classList?.add('dark-theme');
        }
      })();
    </script>

    {% include head.html %}
  </head>

  <body>
    <!-- ‚úÖ Flexbox Ê†πÂÆπÂô® -->
    <div class="site-wrapper d-flex flex-column min-vh-100">
      <!-- ‚úÖ È°µÁúâ -->
      {% include header.html %}

      <!-- ‚úÖ ‰∏ª‰ΩìÂÜÖÂÆπ -->
      <main class="content">
        <div class="container-fluid">
          <div class="row">
            {{ content }}
          </div>
        </div>
      </main>

      <!-- ‚úÖ È°µËÑö -->
      {% include footer.html %}
    </div>

    <!-- ‚úÖ 2. ‰∏ªÈ¢òÂàáÊç¢ÊåâÈíÆÈÄªËæë -->
    <script>
      function updateThemeIcon() {
        const btn = document.getElementById('theme-toggle-btn');
        if (!btn) return;
        const isDark = document.body.classList.contains('dark-theme');
        btn.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
      }

      function toggleTheme() {
        const body = document.body;
        const isDark = body.classList.contains('dark-theme');
        body.classList.remove(isDark ? 'dark-theme' : 'light-theme');
        body.classList.add(isDark ? 'light-theme' : 'dark-theme');
        localStorage.setItem('theme', isDark ? 'light' : 'dark');
        updateThemeIcon();
      }

      document.addEventListener('DOMContentLoaded', updateThemeIcon);
    </script>
  </body>
</html>
